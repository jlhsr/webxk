window.onload=function(){function main(){setSelect()}main()};
function promptBox(title,info,okcell=function(){},nocell=function(){}){var btn=$("<div></div>");var b1=$("<div>确定</div>").addClass("btn btn-default").click(function(){okcell();box.del()});var b2=$("<div>取消</div>").addClass("btn btn-default").click(function(){nocell();box.del()});btn.append(b1).append($("<div style='height:5px'></div>")).append(b2);var con=$("<div></div>").css("width","300px").addClass("fixed-center");$(document.body).append(con);var box=new Dialog({type:2,title:title,body:info,footer:btn});box.rander(con);box.show()}function seedMessage(mes,time){time=time||5000;var box=new Message({body:mes});box.rander();box.show();setTimeout(function(){box.hide(true)},time)}function getRow(){return $("<div></div>").addClass("row")}function getCol(num,type){return $("<div></div>").addClass("col-"+type+"-"+num)}function getTitle(){return $("<div></div>").addClass("title")}function getBox(){return $("<div></div>").addClass("text-box")};
function SelectBox(ojb){ojb=ojb||{};this.state=ojb.state||2;this.body=$("<div></div>").addClass("select-box");this.btn=$("<div></div>").addClass("select");this.sel=$("<div></div>").addClass("select-sel");this.item=[];this.obj.push(this)}SelectBox.prototype.obj=[];SelectBox.prototype.setState=function(state){state=state||this.state;if(state==2){this.sel.css("display","block");this.state=1}else{this.sel.css("display","none");this.state=2}};SelectBox.prototype.render=function(node){this.body.append(this.btn).append(this.sel);this.setState(1);var that=this;$(document).click(function(){that.setState(1)});this.item.forEach(function(item){var body=item.getItem();that.sel.append(body);$(body).click(function(){that.setBtn(item.title)})});this.btn.click(function(){that.obj.forEach(function(item){item.setState(1)});that.setState();return false});$(node).after(this.body)};SelectBox.prototype.setBtn=function(text){this.btn.html(text)};SelectBox.prototype.appendItem=function(item){this.item.push(item)};function SelectItem(obj){obj=obj||{};this.state=obj.state||2;this.name=obj.name||"";this.val=obj.val||"";this.check=$("<input type='radio'>").addClass("radio").prop("name",this.name).prop("value",this.val);this.title=obj.title||"";this.info=obj.info||"";this.body=$("<div></div>").addClass("select-item");var that=this;this.body.click(function(){that.checked(2)});var bol=this.check;var bor=$("<div></div>").append(this.title).append(this.info);this.body.append(bol).append(bor)}SelectItem.prototype.checked=function(state){state=state||this.state;if(state==2){this.check.prop("checked",true);this.state=1}else{this.check.prop("checked",false);this.state=2}};SelectItem.prototype.getItem=function(){return this.body};function setSelect(){$(".form-select").each(function(){var sel=new SelectBox({});var name=$(this).attr("name");$(this).find("option").each(function(){var data=$(this);var val=data.val()||data.html();
var title=data.html();var info=data.attr("info");var opt=new SelectItem({name:name,val:val,title:title,info:info});sel.appendItem(opt);if($(this).prop("selected")){opt.checked(2);sel.setBtn($(this).html())}});sel.render(this)});$("select").remove()};
try{function Dialog(obj){obj=obj||{};this.type=obj.type||0;this.title=obj.title||"";this.titleAligin=obj.titleAligin||"center";this.body=obj.body||null;this.footer=obj.footer||null;this.allObject.push(this);this.box=null}Dialog.prototype.allObject=[];Dialog.prototype.rander=function(node){node=node||document.body;switch(this.type){case 0:this.type="dialog";break;case 1:this.type="dialog1";break;case 2:this.type="dialog2";break;case 3:this.type="dialog3";break;default:this.type="dialog";break}var box=$("<div></div>").addClass(this.type);box.append($("<div></div>").addClass("dialog-title").addClass(this.titleAligin).html(this.title));box.append($("<div></div>").addClass("dialog-body").html(this.body));box.append($("<div></div>").addClass("dialog-footer").html(this.footer));box.css("display","none").css("right","-=100%").css("opacity",0);this.box=box;$(node).append(this.box)};Dialog.prototype.show=function(callback){callback=callback||function(){};this.box.css("display","block");this.box.animate({right:"+=100%",opacity:"1"},300,"swing",callback)};Dialog.prototype.del=function(callback){callback=callback||function(){};var that=this;this.box.animate({right:"+=100%",opacity:"0"},300,"swing",function(){$(this).remove();that.box.html("");callback()})};Dialog.prototype.hide=function(callback){callback=callback||function(){};this.box.animate({left:"-=100%",opacity:"0"},300,function(){$(this).hide(0);callback()})};Dialog.prototype.setTitle=function(node){this.title=node;this.box.find(".dialog-title").html(this.title)};Dialog.prototype.setBody=function(node){this.body=$(node);this.box.find(".dialog-body").html(this.body)};Dialog.prototype.setFooter=function(node){this.footer=$(node);this.box.find(".dialog-footer").html(this.footer)};Dialog.prototype.appendBody=function(node){this.body.append($(node));this.box.find(".dialog-body").html(this.body)}}catch(e){alert(e)};
function Message(obj){obj=obj||{};this.body=obj.body||null;this.box=$("<div></div>").addClass("alert")}Message.prototype.rander=function(){this.box.html($(this.body)).css("right","-50%");$(document.body).append(this.box)};Message.prototype.show=function(callback){callback=callback||function(){};this.box.animate({right:"5px"},500,"swing")};Message.prototype.hide=function(bool){bool=bool||false;this.box.animate({right:"-50%"},500,"swing",function(){if(bool){$(this).remove()}})};
